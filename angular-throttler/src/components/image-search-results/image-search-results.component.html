<div class="h-full flex flex-col p-2 text-sm">
  <!-- Search Bar -->
  <div class="flex items-center space-x-2 p-2 border-b border-[rgb(var(--color-border-base))]">
    <input 
      type="text" 
      placeholder="Search for images..."
      class="flex-grow px-3 py-1.5 bg-[rgb(var(--color-surface))] border border-[rgb(var(--color-border-muted))] rounded-md shadow-sm focus:outline-none focus:ring-[rgb(var(--color-accent-ring))] focus:border-[rgb(var(--color-accent-ring))]"
      [value]="query()"
      (input)="onQueryChange($event)"
      (keydown.enter)="performSearch()">
    <button 
      (click)="performSearch()" 
      [disabled]="!query().trim() || isLoading()"
      class="px-4 py-1.5 bg-[rgb(var(--color-accent-solid-bg))] text-[rgb(var(--color-text-inverted))] rounded-md hover:bg-[rgb(var(--color-accent-solid-bg-hover))] disabled:bg-[rgb(var(--color-disabled-bg))] disabled:cursor-not-allowed transition-colors font-semibold">
        @if(isLoading()) {
          <span>...</span>
        } @else {
          <span>Search</span>
        }
    </button>
  </div>

  <!-- Results -->
  <div class="flex-1 overflow-y-auto p-2">
    @if(isLoading()) {
      <div class="text-center py-8 text-[rgb(var(--color-text-subtle))]">Loading images...</div>
    } @else if (results(); as res) {
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
        @for (result of res; track result.id) {
          <a [href]="result.urls.regular" target="_blank" class="block group aspect-w-1 aspect-h-1">
            <img [src]="result.urls.thumb" [alt]="result.alt_description" class="w-full h-full object-cover rounded-md group-hover:opacity-80 transition-opacity">
          </a>
        } @empty {
          <div class="col-span-full text-center py-8 text-[rgb(var(--color-text-subtle))]">No images found.</div>
        }
      </div>
    } @else {
       <div class="text-center py-8 text-[rgb(var(--color-text-subtle))]">Enter a query to search for images.</div>
    }
  </div>
</div>
